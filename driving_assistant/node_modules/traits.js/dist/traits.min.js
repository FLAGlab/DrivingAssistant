!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.Trait=r()}(this,function(){"use strict";return function(){var e=function(){try{var e={};return Object.defineProperty(e,"x",{get:function(){return 0}}),0===e.x}catch(e){return!1}}();var r=Function.prototype.call,t=Function.prototype.bind?function(e,r){return Function.prototype.bind.call(e,r)}:function(e,r){return function(t){return e.apply(r,arguments)}},n=t(r,Object.prototype.hasOwnProperty),o=t(r,Array.prototype.slice),u=function(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t])},i=Object.freeze||function(e){return e},c=Object.getOwnPropertyNames||function(e){var r=[];for(var t in e)n(e,t)&&r.push(t);return r},f=function(){try{if(Object.getOwnPropertyDescriptor)return!!Object.getOwnPropertyDescriptor({x:0},"x")}catch(e){}return!1}()?Object.getOwnPropertyDescriptor:function(e,r){return{value:e[r],enumerable:!0,writable:!0,configurable:!0}},a=function(){try{if(Object.defineProperty){var e={};return Object.defineProperty(e,"x",{value:0}),0===e.x}}catch(e){}return!1}()?Object.defineProperty:function(e,r,t){e[r]=t.value},p=Object.defineProperties||function(e,r){for(var t in r)n(r,t)&&a(e,t,r[t])},l=Object.create||function(e,r){var t;function n(){}return n.prototype=e||Object.prototype,t=new n,r&&p(t,r),t},v=Object.getOwnProperties||function(e){var r={};return u(c(e),function(t){r[t]=f(e,t)}),r};function b(e){return i({value:void 0,enumerable:!1,required:!0})}function y(r){var t=function(e){var r=function(r){throw new Error("Conflicting property: "+e)};return i(r.prototype),i(r)}(r);return i(e?{get:t,set:t,enumerable:!1,conflict:!0}:{value:t,enumerable:!1,conflict:!0})}function d(e,r){return!(!e.conflict||!r.conflict)||e.get===r.get&&e.set===r.set&&(t=e.value,n=r.value,t===n?0!==t||1/t==1/n:t!=t&&n!=n)&&e.enumerable===r.enumerable&&e.required===r.required&&e.conflict===r.conflict;var t,n}function s(e,r){return i(t(e,r))}var g=i({toString:function(){return"<Trait.required>"}});function O(e){var r={};return u(c(e),function(t){var n=f(e,t);n.value===g?n=b():"function"==typeof n.value?(n.method=!0,n.enumerable=!1,"prototype"in n.value&&i(n.value.prototype)):(n.get&&n.get.prototype&&i(n.get.prototype),n.set&&n.set.prototype&&i(n.set.prototype)),r[t]=n}),r}function j(e,r){var t=function(e){var r={};return u(e,function(e){r[e]=!0}),i(r)}(e),o={};return u(c(r),function(e){!n(t,e)||r[e].required?o[e]=r[e]:o[e]=b()}),i(o)}function m(e,r){var t=l(e),n={};return u(c(r),function(o){var u=r[o];if(u.required){if(null===e||!(o in e))throw new Error("Missing required property: "+o)}else{if(u.conflict)throw new Error("Remaining conflicting property: "+o);"value"in u?u.method?n[o]={value:s(u.value,t),enumerable:u.enumerable,configurable:u.configurable,writable:u.writable}:n[o]=u:n[o]={get:u.get?s(u.get,t):void 0,set:u.set?s(u.set,t):void 0,enumerable:u.enumerable,configurable:u.configurable}}}),p(t,n),i(t)}function w(e){return O(e)}return Object.create||(Object.create=l),Object.getOwnProperties||(Object.getOwnProperties=v),w.required=i(g),w.compose=i(function(e){var r=o(arguments,0),t={};return u(r,function(e){u(c(e),function(r){var o=e[r];if(n(t,r)&&!t[r].required){if(o.required)return;d(t[r],o)||(t[r]=y(r))}else t[r]=o})}),i(t)}),w.resolve=i(function(e,r){var t={},o=[];for(var f in e)n(e,f)&&(e[f]?t[f]=e[f]:o.push(f));return function(e,r){var t={};return u(c(r),function(o){if(n(e,o)&&!r[o].required){var u=e[o];n(t,u)&&!t[u].required?t[u]=y(u):t[u]=r[o],n(t,o)||(t[o]=b())}else n(t,o)?r[o].required||(t[o]=y(o)):t[o]=r[o]}),i(t)}(t,j(o,r))}),w.override=i(function(e){var r=o(arguments,0),t={};return u(r,function(e){u(c(e),function(r){var o=e[r];n(t,r)&&!t[r].required||(t[r]=o)})}),i(t)}),w.create=i(m),w.eqv=i(function(e,r){var t,n=c(e),o=c(r);if(n.length!==o.length)return!1;for(var u=0;u<n.length;u++)if(!r[t=n[u]]||!d(e[t],r[t]))return!1;return!0}),w.object=i(function(e,r){return m(Object.prototype,O(e))}),i(w)}()});
